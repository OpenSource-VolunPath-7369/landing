<div class="space-y-3">
  @if (messages && messages.length > 0) {
    @for (message of messages; track message.id) {
      <div class="message-item bg-white rounded-lg p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 cursor-pointer"
           [class.bg-blue-50]="!message.isRead"
           [class.border-blue-200]="!message.isRead"
           [class.highlighted]="isHighlighted(message)"
           [class.bg-yellow-100]="isHighlighted(message)"
           [class.border-yellow-400]="isHighlighted(message)"
           [class.shadow-lg]="isHighlighted(message)"
           (click)="onMessageClick(message)">
        <div class="flex items-center space-x-3">
          <!-- Icono del remitente -->
          <div class="flex-shrink-0">
            <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center border-2 overflow-hidden"
                 [class]="getIconClass(message)">
              <!-- Si senderIcon es una URL, mostrar imagen -->
              @if (isImageUrl(message.senderIcon)) {
                <img [src]="message.senderIcon" 
                     [alt]="getSenderName(message)"
                     class="w-full h-full object-cover rounded-full"
                     (error)="onImageError($event, message)"
                     onerror="this.src='/assets/mundo.png'">
              } @else {
                <!-- Si es una clase de FontAwesome, mostrar icono -->
                <i [class]="getSenderIcon(message)" class="text-xl"></i>
              }
            </div>
          </div>
          
          <!-- Contenido del mensaje -->
          <div class="flex-1 min-w-0">
            <p class="text-gray-900 text-sm font-medium">
              <span class="font-semibold">{{ getSenderName(message) }}</span> {{ message.content }}
            </p>
            <p class="text-xs text-gray-500 mt-1">
              {{ formatTimestamp(message.timestamp) }}
            </p>
            @if (!message.isRead) {
              <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-1"></span>
            }
          </div>
          
          <!-- Indicador de tipo de mensaje -->
          <div class="flex-shrink-0">
            @switch (message.type) {
              @case ('volunteer_inquiry') {
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  Consulta
                </span>
              }
              @case ('activity_details') {
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                  Detalles
                </span>
              }
              @case ('confirmation') {
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                  Confirmaci√≥n
                </span>
              }
              @case ('thank_you') {
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                  Agradecimiento
                </span>
              }
              @default {
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                  General
                </span>
              }
            }
          </div>
        </div>
      </div>
    }
  } @else {
    <div class="text-center py-8">
      <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
      <h3 class="mt-2 text-sm font-medium text-gray-900">No hay mensajes</h3>
      <p class="mt-1 text-sm text-gray-500">No tienes mensajes disponibles en este momento.</p>
    </div>
  }
</div>

