<div class="organization-profile-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <div class="text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
      <p class="mt-4 text-gray-600">{{ 'organization.loading' | translate }}</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="text-center py-12">
    <div class="text-red-600 mb-4">
      <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z" />
      </svg>
    </div>
    <h3 class="text-lg font-medium text-gray-900 mb-2">{{ 'organization.errorLoading' | translate }}</h3>
    <p class="text-gray-600 mb-4">{{ error }}</p>
    <button 
      (click)="goBack()" 
      class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700">
      {{ 'organization.backToCommunity' | translate }}
    </button>
  </div>

  <!-- Organization Profile -->
  <div *ngIf="organization && !loading" class="organization-profile">
    <!-- Header -->
    <div class="profile-header">
      <div class="header-actions">
        <button (click)="goBack()" class="back-button">
          <i class="fa-solid fa-arrow-left"></i>
          {{ 'organization.back' | translate }}
        </button>
        <button (click)="refreshOrganization()" class="refresh-button" [title]="'organization.reloadTooltip' | translate">
          <i class="fa-solid fa-rotate"></i>
          {{ 'organization.reload' | translate }}
        </button>
      </div>
      
      <div class="organization-header-content">
        <div class="organization-logo-large">
          <img [src]="organization.logo || '/assets/mundo.png'" 
               [alt]="organization.name" 
               class="logo-image"
               (error)="onImageError($event)">
          <span *ngIf="organization.isVerified" class="verified-badge" [title]="'organization.verified' | translate">
            <i class="fa-solid fa-check-circle"></i>
          </span>
        </div>
        <div class="organization-info-header">
          <h1 class="organization-name-large">{{ organization.name }}</h1>
          <div class="organization-meta">
            <span *ngIf="organization.rating > 0" class="rating">
              <i class="fa-solid fa-star"></i>
              {{ organization.rating.toFixed(1) }}
            </span>
            <span class="volunteer-count">
              <i class="fa-solid fa-users"></i>
              {{ organization.volunteerCount }} {{ 'organization.volunteers' | translate }}
            </span>
            <span *ngIf="organization.foundedYear" class="founded-year">
              {{ 'organization.foundedIn' | translate }} {{ organization.foundedYear }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="profile-content">
      <!-- Left Column -->
      <div class="profile-main">
        <!-- Description -->
        <div class="info-card">
          <h2 class="card-title">{{ 'organization.about' | translate }}</h2>
          <p class="description-text">{{ organization.description }}</p>
        </div>

        <!-- Categories -->
        <div *ngIf="organization.categories && organization.categories.length > 0" class="info-card">
          <h2 class="card-title">{{ 'organization.categories' | translate }}</h2>
          <div class="categories-list">
            <span *ngFor="let category of organization.categories" class="category-tag">
              {{ category }}
            </span>
          </div>
        </div>

        <!-- Publications -->
        <div class="info-card">
          <h2 class="card-title">{{ 'organization.publications' | translate }} ({{ publications.length }})</h2>
          <div *ngIf="publications.length === 0" class="empty-state">
            <p class="text-gray-500">{{ 'organization.noPublications' | translate }}</p>
          </div>
          <div *ngIf="publications.length > 0" class="publications-list">
            <div *ngFor="let publication of publications" class="publication-item">
              <img [src]="publication.image" [alt]="publication.title" class="publication-thumbnail">
              <div class="publication-info">
                <h3 class="publication-title">{{ publication.title }}</h3>
                <p class="publication-description">{{ publication.description }}</p>
                <div class="publication-meta">
                  <span><i class="fa-solid fa-calendar"></i> {{ publication.date }} {{ publication.time }}</span>
                  <span *ngIf="publication.location"><i class="fa-solid fa-map-marker-alt"></i> {{ publication.location }}</span>
                  <span><i class="fa-solid fa-heart"></i> {{ publication.likes }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column (Sidebar) -->
      <div class="profile-sidebar">
        <!-- Contact Information -->
        <div class="info-card">
          <h2 class="card-title">{{ 'organization.contactInfo' | translate }}</h2>
          <div class="contact-info">
            <div *ngIf="organization.email" class="contact-item">
              <i class="fa-solid fa-envelope"></i>
              <a [href]="'mailto:' + organization.email">{{ organization.email }}</a>
            </div>
            <div *ngIf="organization.phone" class="contact-item">
              <i class="fa-solid fa-phone"></i>
              <a [href]="'tel:' + organization.phone">{{ organization.phone }}</a>
            </div>
            <div *ngIf="organization.address" class="contact-item">
              <i class="fa-solid fa-map-marker-alt"></i>
              <span>{{ organization.address }}</span>
            </div>
            <div *ngIf="organization.website" class="contact-item">
              <i class="fa-solid fa-globe"></i>
              <a [href]="organization.website" target="_blank" rel="noopener noreferrer">{{ 'organization.website' | translate }}</a>
            </div>
          </div>
        </div>

        <!-- Social Media -->
        <div *ngIf="organization.hasSocialMedia()" class="info-card">
          <h2 class="card-title">{{ 'organization.socialMedia' | translate }}</h2>
          <div class="social-media">
            <a *ngIf="organization.socialMedia.facebook" 
               [href]="organization.socialMedia.facebook" 
               target="_blank" 
               rel="noopener noreferrer"
               class="social-link">
              <i class="fa-brands fa-facebook"></i>
              Facebook
            </a>
            <a *ngIf="organization.socialMedia.instagram" 
               [href]="organization.socialMedia.instagram" 
               target="_blank" 
               rel="noopener noreferrer"
               class="social-link">
              <i class="fa-brands fa-instagram"></i>
              Instagram
            </a>
            <a *ngIf="organization.socialMedia.twitter" 
               [href]="organization.socialMedia.twitter" 
               target="_blank" 
               rel="noopener noreferrer"
               class="social-link">
              <i class="fa-brands fa-twitter"></i>
              Twitter
            </a>
          </div>
        </div>

        <!-- Stats -->
        <div class="info-card">
          <h2 class="card-title">{{ 'organization.statistics' | translate }}</h2>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">{{ organization.volunteerCount }}</div>
              <div class="stat-label">{{ 'organization.volunteers' | translate }}</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">{{ publications.length }}</div>
              <div class="stat-label">{{ 'organization.publications' | translate }}</div>
            </div>
            <div *ngIf="organization.foundedYear" class="stat-item">
              <div class="stat-value">{{ organization.getAge() }}</div>
              <div class="stat-label">{{ 'organization.yearsActive' | translate }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

